function prop(e){return function(t){return t[e]}}function unique(e){var t=JSON.stringify;"string"==typeof e?t=prop(e):"function"==typeof e&&(t=e);var r={},n=new Stream;n.readable=!0,n.writable=!0;var i=0;n.write=function(e){var i=t(e);void 0===r[i]&&(r[i]=!0,n.emit("data",e))};var a=0;return n.end=function(e){arguments.length&&n.write(e),a++,(a===i||0===i)&&(n.writable=!1,n.emit("end"))},n.destroy=function(e){n.writable=!1},n.on("pipe",function(){i++}),n.on("unpipe",function(){i--}),n}var Stream=require("stream");module.exports=unique;