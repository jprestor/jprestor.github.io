"use strict";function array_to_hash(e){for(var t=Object.create(null),r=0;r<e.length;++r)t[e[r]]=!0;return t}function slice(e,t){return Array.prototype.slice.call(e,t||0)}function characters(e){return e.split("")}function member(e,t){return t.indexOf(e)>=0}function find_if(e,t){for(var r=0,n=t.length;n>r;++r)if(e(t[r]))return t[r]}function repeat_string(e,t){if(0>=t)return"";if(1==t)return e;var r=repeat_string(e,t>>1);return r+=r,1&t&&(r+=e),r}function configure_error_stack(e){Object.defineProperty(e.prototype,"stack",{get:function(){var e=new Error(this.message);e.name=this.name;try{throw e}catch(t){return t.stack}}})}function DefaultsError(e,t){this.message=e,this.defs=t}function defaults(e,t,r){e===!0&&(e={});var n=e||{};if(r)for(var i in n)HOP(n,i)&&!HOP(t,i)&&DefaultsError.croak("`"+i+"` is not a supported option",t);for(var i in t)HOP(t,i)&&(n[i]=e&&HOP(e,i)?e[i]:t[i]);return n}function merge(e,t){var r=0;for(var n in t)HOP(t,n)&&(e[n]=t[n],r++);return r}function noop(){}function return_false(){return!1}function return_true(){return!0}function return_this(){return this}function return_null(){return null}function push_uniq(e,t){e.indexOf(t)<0&&e.push(t)}function string_template(e,t){return e.replace(/\{(.+?)\}/g,function(e,r){return t&&t[r]})}function remove(e,t){for(var r=e.length;--r>=0;)e[r]===t&&e.splice(r,1)}function mergeSort(e,t){function r(e,r){for(var n=[],i=0,a=0,o=0;i<e.length&&a<r.length;)t(e[i],r[a])<=0?n[o++]=e[i++]:n[o++]=r[a++];return i<e.length&&n.push.apply(n,e.slice(i)),a<r.length&&n.push.apply(n,r.slice(a)),n}function n(e){if(e.length<=1)return e;var t=Math.floor(e.length/2),i=e.slice(0,t),a=e.slice(t);return i=n(i),a=n(a),r(i,a)}return e.length<2?e.slice():n(e)}function set_difference(e,t){return e.filter(function(e){return t.indexOf(e)<0})}function set_intersection(e,t){return e.filter(function(e){return t.indexOf(e)>=0})}function makePredicate(e){function a(e){return JSON.stringify(e).replace(/[\u2028\u2029]/g,function(e){switch(e){case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}return e})}function o(e){if(1==e.length)return t+="return str === "+a(e[0])+";";t+="switch(str){";for(var r=0;r<e.length;++r)t+="case "+a(e[r])+":";t+="return true}return false;"}e instanceof Array||(e=e.split(" "));var t="",r=[];e:for(var n=0;n<e.length;++n){for(var i=0;i<r.length;++i)if(r[i][0].length==e[n].length){r[i].push(e[n]);continue e}r.push([e[n]])}if(r.length>3){r.sort(function(e,t){return t.length-e.length}),t+="switch(str.length){";for(var n=0;n<r.length;++n){var s=r[n];t+="case "+s[0].length+":",o(s)}t+="}"}else o(e);return new Function("str",t)}function all(e,t){for(var r=e.length;--r>=0;)if(!t(e[r]))return!1;return!0}function Dictionary(){this._values=Object.create(null),this._size=0}function HOP(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function first_in_statement(e){for(var n,t=e.parent(-1),r=0;n=e.parent(r);r++){if(n instanceof AST_Statement&&n.body===t)return!0;if(!(n instanceof AST_Seq&&n.car===t||n instanceof AST_Call&&n.expression===t&&!(n instanceof AST_New)||n instanceof AST_Dot&&n.expression===t||n instanceof AST_Sub&&n.expression===t||n instanceof AST_Conditional&&n.condition===t||n instanceof AST_Binary&&n.left===t||n instanceof AST_UnaryPostfix&&n.expression===t))return!1;t=n}}DefaultsError.prototype=Object.create(Error.prototype),DefaultsError.prototype.constructor=DefaultsError,DefaultsError.prototype.name="DefaultsError",configure_error_stack(DefaultsError),DefaultsError.croak=function(e,t){throw new DefaultsError(e,t)};var MAP=function(){function e(e,a,o){function c(){var c=a(e[l],l),f=c instanceof i;return f&&(c=c.v),c instanceof r?(c=c.v,c instanceof n?u.push.apply(u,o?c.v.slice().reverse():c.v):u.push(c)):c!==t&&(c instanceof n?s.push.apply(s,o?c.v.slice().reverse():c.v):s.push(c)),f}var l,s=[],u=[];if(e instanceof Array)if(o){for(l=e.length;--l>=0&&!c(););s.reverse(),u.reverse()}else for(l=0;l<e.length&&!c();++l);else for(l in e)if(HOP(e,l)&&c())break;return u.concat(s)}function r(e){this.v=e}function n(e){this.v=e}function i(e){this.v=e}e.at_top=function(e){return new r(e)},e.splice=function(e){return new n(e)},e.last=function(e){return new i(e)};var t=e.skip={};return e}();Dictionary.prototype={set:function(e,t){return this.has(e)||++this._size,this._values["$"+e]=t,this},add:function(e,t){return this.has(e)?this.get(e).push(t):this.set(e,[t]),this},get:function(e){return this._values["$"+e]},del:function(e){return this.has(e)&&(--this._size,delete this._values["$"+e]),this},has:function(e){return"$"+e in this._values},each:function(e){for(var t in this._values)e(this._values[t],t.substr(1))},size:function(){return this._size},map:function(e){var t=[];for(var r in this._values)t.push(e(this._values[r],r.substr(1)));return t},toObject:function(){return this._values}},Dictionary.fromObject=function(e){var t=new Dictionary;return t._size=merge(t._values,e),t};