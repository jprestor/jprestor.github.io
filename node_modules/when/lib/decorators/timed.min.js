!function(e){"use strict";e(function(e){function n(e,r,n,i){return t.setTimer(function(){e(n,i,r)},r)}var t=e("../env"),r=e("../TimeoutError");return function(e){function i(e,t,r){n(a,e,t,r)}function a(e,t){t.resolve(e)}function o(e,t,n){var i="undefined"==typeof e?new r("timed out after "+n+"ms"):e;t.reject(i)}return e.prototype.delay=function(e){var t=this._beget();return this._handler.fold(i,e,void 0,t._handler),t},e.prototype.timeout=function(e,r){var i=this._beget(),a=i._handler,s=n(o,e,r,i._handler);return this._handler.visit(a,function(e){t.clearTimer(s),this.resolve(e)},function(e){t.clearTimer(s),this.reject(e)},a.notify),i},e}})}("function"==typeof define&&define.amd?define:function(e){module.exports=e(require)});