!function(e){"use strict";e(function(e){var t=e("../state"),r=e("../apply");return function(e){function l(t){function c(e){o=null,this.resolve(e)}function f(e){this.resolved||(o.push(e),0===--a&&this.reject(o))}for(var s,u,r=e._defer(),n=r._handler,i=t.length>>>0,a=i,o=[],l=0;i>l;++l)if(u=t[l],void 0!==u||l in t){if(s=e._handler(u),s.state()>0){n.become(s),e._visitRemaining(t,l,s);break}s.visit(n,c,f)}else--a;return 0===a&&n.reject(new RangeError("any(): array must not be empty")),r}function c(t,r){function p(e){this.resolved||(a.push(e),0===--u&&(o=null,this.resolve(a)))}function h(e){this.resolved||(o.push(e),0===--l&&(a=null,this.reject(o)))}var l,c,f,n=e._defer(),i=n._handler,a=[],o=[],s=t.length>>>0,u=0;for(f=0;s>f;++f)c=t[f],(void 0!==c||f in t)&&++u;for(r=Math.max(r,0),l=u-r+1,u=Math.min(r,u),r>u?i.reject(new RangeError("some(): array must contain at least "+r+" item(s), but had "+u)):0===u&&i.resolve(a),f=0;s>f;++f)c=t[f],(void 0!==c||f in t)&&e._handler(c).visit(i,p,h,i.notify);return n}function f(t,r){return e._traverse(r,t)}function p(t,r){var n=u.call(t);return e._traverse(r,n).then(function(e){return h(n,e)})}function h(t,r){for(var n=r.length,i=new Array(n),a=0,o=0;n>a;++a)r[a]&&(i[o++]=e._handler(t[a]).value);return i.length=o,i}function d(e){return a(e.map(m))}function m(r){var n;return r instanceof e&&(n=r._handler.join()),n&&0===n.state()||!n?i(r).then(t.fulfilled,t.rejected):(n._unreport(),t.inspect(n))}function g(e,t){return arguments.length>2?o.call(e,y(t),arguments[2]):o.call(e,y(t))}function v(e,t){return arguments.length>2?s.call(e,y(t),arguments[2]):s.call(e,y(t))}function y(e){return function(t,r,i){return n(e,void 0,[t,r,i])}}var n=r(e),i=e.resolve,a=e.all,o=Array.prototype.reduce,s=Array.prototype.reduceRight,u=Array.prototype.slice;return e.any=l,e.some=c,e.settle=d,e.map=f,e.filter=p,e.reduce=g,e.reduceRight=v,e.prototype.spread=function(e){return this.then(a).then(function(t){return e.apply(this,t)})},e}})}("function"==typeof define&&define.amd?define:function(e){module.exports=e(require)});