!function(e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):"undefined"!=typeof window?window.when=e():"undefined"!=typeof global?global.when=e():"undefined"!=typeof self&&(self.when=e())}(function(){var e;return function n(e,t,r){function i(o,s){if(!t[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var l=t[o]={exports:{}};e[o][0].call(l.exports,function(t){var r=e[o][1][t];return i(r?r:t)},l,l.exports,n,e,t,r)}return t[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,r){var n=t.exports=e("../when");n.callbacks=e("../callbacks"),n.cancelable=e("../cancelable"),n.delay=e("../delay"),n.fn=e("../function"),n.guard=e("../guard"),n.keys=e("../keys"),n.nodefn=n.node=e("../node"),n.parallel=e("../parallel"),n.pipeline=e("../pipeline"),n.poll=e("../poll"),n.sequence=e("../sequence"),n.timeout=e("../timeout")},{"../callbacks":2,"../cancelable":3,"../delay":4,"../function":5,"../guard":6,"../keys":7,"../node":26,"../parallel":27,"../pipeline":28,"../poll":29,"../sequence":30,"../timeout":31,"../when":32}],2:[function(t,r,n){!function(e){e(function(e){function s(e,t){return o(e,this,t||[])}function u(e,t,r,n){r.push(v(n.resolve,n),v(n.reject,n)),l(e,t,r,n)}function l(e,t,r,n){try{e.apply(t,r)}catch(i){n.reject(i)}}function c(e){return o(e,this,i.call(arguments,1))}function f(e){var t=arguments.length>1?i.call(arguments,1):[];return function(){return o(e,this,t.concat(i.call(arguments)))}}function p(e,t,r){return n(f,t,r,e)}function h(e,t){return function(){var n=this;return r.all(arguments).then(function(i){var o,s,a=r._defer();return"number"==typeof t.callback&&(o=d(i,t.callback)),"number"==typeof t.errback&&(s=d(i,t.errback)),o>s?(m(i,s,a._handler.reject,a._handler),m(i,o,a._handler.resolve,a._handler)):(m(i,o,a._handler.resolve,a._handler),m(i,s,a._handler.reject,a._handler)),e.apply(n,i),a})}}function d(e,t){return 0>t?e.length+t+2:t}function m(e,t,r,n){"number"==typeof t&&e.splice(t,0,v(r,n))}function v(e,t){return function(){arguments.length>1?e.call(t,i.call(arguments)):e.apply(t,arguments)}}var t=e("./when"),r=t.Promise,n=e("./lib/liftAll"),i=Array.prototype.slice,a=e("./lib/apply"),o=a(r,u);return{lift:f,liftAll:p,apply:s,call:c,promisify:h}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e(t)})},{"./lib/apply":11,"./lib/liftAll":23,"./when":32}],3:[function(t,r,n){!function(e){e(function(){return function(e,t){return e.cancel=function(){try{e.reject(t(e))}catch(r){e.reject(r)}return e.promise},e}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e()})},{}],4:[function(t,r,n){!function(e){e(function(e){var t=e("./when");return function(e,r){return t(r).delay(e)}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e(t)})},{"./when":32}],5:[function(t,r,n){!function(e){e(function(e){function o(e,t){return i(e,this,null==t?[]:a.call(t))}function s(e){var t=arguments.length>1?a.call(arguments,1):[];return function(){return i(e,this,t.concat(a.call(arguments)))}}function u(e,t,r){return n(s,t,r,e)}function l(e){var n=a.call(arguments,1);return function(){var i=this,o=a.call(arguments),s=r.apply(i,[e].concat(o));return t.reduce(n,function(e,t){return t.call(i,e)},s)}}var t=e("./when"),r=t["try"],n=e("./lib/liftAll"),i=e("./lib/apply")(t.Promise),a=Array.prototype.slice;return{lift:s,liftAll:u,call:r,apply:o,compose:l}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e(t)})},{"./lib/apply":11,"./lib/liftAll":23,"./when":32}],6:[function(t,r,n){!function(e){e(function(e){function n(e,n){return function(){var i=r.call(arguments);return t(e()).withThis(this).then(function(e){return t(n.apply(this,i))["finally"](e)})}}function i(e){function i(){r=Math.max(r-1,0),n.length>0&&n.shift()(i)}var r=0,n=[];return function(){return t.promise(function(t){e>r?t(i):n.push(t),r+=1})}}var t=e("./when"),r=Array.prototype.slice;return n.n=i,n})}("function"==typeof e&&e.amd?e:function(e){r.exports=e(t)})},{"./when":32}],7:[function(t,r,n){!function(e){"use strict";e(function(e){function i(e){function l(e,t,r){this[e]=t,0===--o&&r.resolve(i)}for(var u,t=r._defer(),n=r._handler(t),i={},a=Object.keys(e),o=a.length,s=0;s<a.length;++s)u=a[s],r._handler(e[u]).fold(l,u,i,n);return 0===o&&n.resolve(i),t}function a(e,t){function r(e,r){return t(r,e)}return n(e).then(function(e){return i(Object.keys(e).reduce(function(t,i){return t[i]=n(e[i]).fold(r,i),t},{}))})}function o(e){var i=Object.keys(e),a={};if(0===i.length)return n(a);var o=r._defer(),u=r._handler(o),l=i.map(function(t){return e[t]});return t.settle(l).then(function(e){s(i,e,a,u)}),o}function s(e,t,r,n){for(var i=0;i<e.length;i++)r[e[i]]=t[i];n.resolve(r)}var t=e("./when"),r=t.Promise,n=t.resolve;return{all:t.lift(i),map:a,settle:o}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e(t)})},{"./when":32}],8:[function(t,r,n){!function(e){"use strict";e(function(e){var t=e("./makePromise"),r=e("./Scheduler"),n=e("./env").asap;return t({scheduler:new r(n)})})}("function"==typeof e&&e.amd?e:function(e){r.exports=e(t)})},{"./Scheduler":9,"./env":21,"./makePromise":24}],9:[function(t,r,n){!function(e){"use strict";e(function(){function e(e){this._async=e,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var t=this;this.drain=function(){t._drain()}}return e.prototype.enqueue=function(e){this._queue[this._queueLen++]=e,this.run()},e.prototype.afterQueue=function(e){this._afterQueue[this._afterQueueLen++]=e,this.run()},e.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},e.prototype._drain=function(){for(var e=0;e<this._queueLen;++e)this._queue[e].run(),this._queue[e]=void 0;for(this._queueLen=0,this._running=!1,e=0;e<this._afterQueueLen;++e)this._afterQueue[e].run(),this._afterQueue[e]=void 0;this._afterQueueLen=0},e})}("function"==typeof e&&e.amd?e:function(e){r.exports=e()})},{}],10:[function(t,r,n){!function(e){"use strict";e(function(){function e(t){Error.call(this),this.message=t,this.name=e.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e})}("function"==typeof e&&e.amd?e:function(e){r.exports=e()})},{}],11:[function(t,r,n){!function(e){"use strict";e(function(){function e(e,r){function n(t,n,a){var o=e._defer(),s=a.length,u=new Array(s);return i({f:t,thisArg:n,args:a,params:u,i:s-1,call:r},o._handler),o}function i(t,n){if(t.i<0)return r(t.f,t.thisArg,t.params,n);var i=e._handler(t.args[t.i]);i.fold(a,t,void 0,n)}function a(e,t,r){e.params[e.i]=t,e.i-=1,i(e,r)}return arguments.length<2&&(r=t),n}function t(e,t,r,n){try{n.resolve(e.apply(t,r))}catch(i){n.reject(i)}}return e.tryCatchResolve=t,e})}("function"==typeof e&&e.amd?e:function(e){r.exports=e()})},{}],12:[function(t,r,n){!function(e){"use strict";e(function(e){var t=e("../state"),r=e("../apply");return function(e){function l(t){function c(e){o=null,this.resolve(e)}function f(e){this.resolved||(o.push(e),0===--a&&this.reject(o))}for(var s,u,r=e._defer(),n=r._handler,i=t.length>>>0,a=i,o=[],l=0;i>l;++l)if(u=t[l],void 0!==u||l in t){if(s=e._handler(u),s.state()>0){n.become(s),e._visitRemaining(t,l,s);break}s.visit(n,c,f)}else--a;return 0===a&&n.reject(new RangeError("any(): array must not be empty")),r}function c(t,r){function p(e){this.resolved||(a.push(e),0===--u&&(o=null,this.resolve(a)))}function h(e){this.resolved||(o.push(e),0===--l&&(a=null,this.reject(o)))}var l,c,f,n=e._defer(),i=n._handler,a=[],o=[],s=t.length>>>0,u=0;for(f=0;s>f;++f)c=t[f],(void 0!==c||f in t)&&++u;for(r=Math.max(r,0),l=u-r+1,u=Math.min(r,u),r>u?i.reject(new RangeError("some(): array must contain at least "+r+" item(s), but had "+u)):0===u&&i.resolve(a),f=0;s>f;++f)c=t[f],(void 0!==c||f in t)&&e._handler(c).visit(i,p,h,i.notify);return n}function f(t,r){return e._traverse(r,t)}function p(t,r){var n=u.call(t);return e._traverse(r,n).then(function(e){return h(n,e)})}function h(t,r){for(var n=r.length,i=new Array(n),a=0,o=0;n>a;++a)r[a]&&(i[o++]=e._handler(t[a]).value);return i.length=o,i}function d(e){return a(e.map(m))}function m(r){var n;return r instanceof e&&(n=r._handler.join()),n&&0===n.state()||!n?i(r).then(t.fulfilled,t.rejected):(n._unreport(),t.inspect(n))}function v(e,t){return arguments.length>2?o.call(e,y(t),arguments[2]):o.call(e,y(t))}function g(e,t){return arguments.length>2?s.call(e,y(t),arguments[2]):s.call(e,y(t))}function y(e){return function(t,r,i){return n(e,void 0,[t,r,i])}}var n=r(e),i=e.resolve,a=e.all,o=Array.prototype.reduce,s=Array.prototype.reduceRight,u=Array.prototype.slice;return e.any=l,e.some=c,e.settle=d,e.map=f,e.filter=p,e.reduce=v,e.reduceRight=g,e.prototype.spread=function(e){return this.then(a).then(function(t){return e.apply(this,t)})},e}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e(t)})},{"../apply":11,"../state":25}],13:[function(t,r,n){!function(e){"use strict";e(function(){function e(){throw new TypeError("catch predicate must be a function")}function t(e,t){return r(t)?e instanceof t:t(e)}function r(e){return e===Error||null!=e&&e.prototype instanceof Error}function n(e){return("object"==typeof e||"function"==typeof e)&&null!==e}function i(e){return e}return function(r){function u(e,r){return function(n){return t(n,r)?e.call(this,n):o(n)}}function l(e,t,r,i){var a=e.call(t);return n(a)?c(a,r,i):r(i)}function c(e,t,r){return a(e).then(function(){return t(r)})}var a=r.resolve,o=r.reject,s=r.prototype["catch"];return r.prototype.done=function(e,t){this._handler.visit(this._handler.receiver,e,t)},r.prototype["catch"]=r.prototype.otherwise=function(t){return arguments.length<2?s.call(this,t):"function"!=typeof t?this.ensure(e):s.call(this,u(arguments[1],t))},r.prototype["finally"]=r.prototype.ensure=function(e){return"function"!=typeof e?this:this.then(function(t){return l(e,this,i,t)},function(t){return l(e,this,o,t)})},r.prototype["else"]=r.prototype.orElse=function(e){return this.then(void 0,function(){return e})},r.prototype["yield"]=function(e){return this.then(function(){return e})},r.prototype.tap=function(e){return this.then(e)["yield"](this)},r}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e()})},{}],14:[function(t,r,n){!function(e){"use strict";e(function(){return function(e){return e.prototype.fold=function(t,r){var n=this._beget();return this._handler.fold(function(r,n,i){e._handler(r).fold(function(e,r,n){n.resolve(t.call(this,r,e))},n,this,i)},r,n._handler.receiver,n._handler),n},e}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e()})},{}],15:[function(t,r,n){!function(e){"use strict";e(function(e){var t=e("../state").inspect;return function(e){return e.prototype.inspect=function(){return t(e._handler(this))},e}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e(t)})},{"../state":25}],16:[function(t,r,n){!function(e){"use strict";e(function(){return function(e){function r(e,t,r,i){return n(function(t){return[t,e(t)]},t,r,i)}function n(e,r,i,a){function o(a,o){return t(i(a)).then(function(){return n(e,r,i,o)})}return t(a).then(function(n){return t(r(n)).then(function(r){return r?n:t(e(n)).spread(o)})})}var t=e.resolve;return e.iterate=r,e.unfold=n,e}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e()})},{}],17:[function(t,r,n){!function(e){"use strict";e(function(){return function(e){return e.prototype.progress=function(e){return this.then(void 0,void 0,e)},e}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e()})},{}],18:[function(t,r,n){!function(e){"use strict";e(function(e){function n(e,r,n,i){return t.setTimer(function(){e(n,i,r)},r)}var t=e("../env"),r=e("../TimeoutError");return function(e){function i(e,t,r){n(a,e,t,r)}function a(e,t){t.resolve(e)}function o(e,t,n){var i="undefined"==typeof e?new r("timed out after "+n+"ms"):e;t.reject(i)}return e.prototype.delay=function(e){var t=this._beget();return this._handler.fold(i,e,void 0,t._handler),t},e.prototype.timeout=function(e,r){var i=this._beget(),a=i._handler,s=n(o,e,r,i._handler);return this._handler.visit(a,function(e){t.clearTimer(s),this.resolve(e)},function(e){t.clearTimer(s),this.reject(e)},a.notify),i},e}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e(t)})},{"../TimeoutError":10,"../env":21}],19:[function(t,r,n){!function(e){"use strict";e(function(e){function n(e){throw e}function i(){}var t=e("../env").setTimer,r=e("../format");return function(e){function f(e){e.handled||(l.push(e),a("Potentially unhandled rejection ["+e.id+"] "+r.formatError(e.value)))}function p(e){var t=l.indexOf(e);t>=0&&(l.splice(t,1),o("Handled previous rejection ["+e.id+"] "+r.formatObject(e.value)))}function h(e,r){u.push(e,r),null===c&&(c=t(d,0))}function d(){for(c=null;u.length>0;)u.shift()(u.shift())}var s,a=i,o=i;"undefined"!=typeof console&&(s=console,a="undefined"!=typeof s.error?function(e){s.error(e)}:function(e){s.log(e)},o="undefined"!=typeof s.info?function(e){s.info(e)}:function(e){s.log(e)}),e.onPotentiallyUnhandledRejection=function(e){h(f,e)},e.onPotentiallyUnhandledRejectionHandled=function(e){h(p,e)},e.onFatalRejection=function(e){h(n,e.value)};var u=[],l=[],c=null;return e}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e(t)})},{"../env":21,"../format":22}],20:[function(t,r,n){!function(e){"use strict";e(function(){return function(e){return e.prototype["with"]=e.prototype.withThis=function(e){var t=this._beget(),r=t._handler;return r.receiver=e,this._handler.chain(r,e),t},e}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e()})},{}],21:[function(t,r,n){!function(e){"use strict";e(function(e){function u(){return"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)}function l(){return"undefined"!=typeof MutationObserver&&MutationObserver||"undefined"!=typeof WebKitMutationObserver&&WebKitMutationObserver}function c(e){function i(){var e=t;t=void 0,e()}var t,r=document.createTextNode(""),n=new e(i);n.observe(r,{characterData:!0});var a=0;return function(e){t=e,r.data=a^=1}}var t,r="undefined"!=typeof setTimeout&&setTimeout,n=function(e,t){return setTimeout(e,t)},i=function(e){return clearTimeout(e)},a=function(e){return r(e,0)};if(u())a=function(e){return process.nextTick(e)};else if(t=l())a=c(t);else if(!r){var o=e,s=o("vertx");n=function(e,t){return s.setTimer(t,e)},i=s.cancelTimer,a=s.runOnLoop||s.runOnContext}return{setTimer:n,clearTimer:i,asap:a}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e(t)})},{}],22:[function(t,r,n){!function(e){"use strict";e(function(){function e(e){var r="object"==typeof e&&null!==e&&(e.stack||e.message)?e.stack||e.message:t(e);return e instanceof Error?r:r+" (WARNING: non-Error used)"}function t(e){var t=String(e);return"[object Object]"===t&&"undefined"!=typeof JSON&&(t=r(e,t)),t}function r(e,t){try{return JSON.stringify(e)}catch(r){return t}}return{formatError:e,formatObject:t,tryStringify:r}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e()})},{}],23:[function(t,r,n){!function(e){"use strict";e(function(){function e(e,t,r){return e[r]=t,e}function t(e){return"function"==typeof e?e.bind():Object.create(e)}return function(r,n,i,a){return"undefined"==typeof n&&(n=e),Object.keys(a).reduce(function(e,t){var i=a[t];return"function"==typeof i?n(e,r(i),t):e},"undefined"==typeof i?t(a):i)}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e()})},{}],24:[function(t,r,n){!function(e){"use strict";e(function(){return function(e){function i(e,t){this._handler=e===_?t:a(e)}function a(e){function n(e){t.resolve(e)}function i(e){t.reject(e)}function a(e){t.notify(e)}var t=new E;try{e(n,i,a)}catch(r){i(r)}return t}function o(e){return H(e)?e:new i(_,new A(b(e)))}function s(e){return new i(_,new A(new T(e)))}function u(){return I}function l(){return new i(_,new E)}function c(e,t){var r=new E(e.receiver,e.join().context);return new t(_,r)}function f(e){return h(Y,null,e)}function p(e,t){return h($,e,t)}function h(e,t,r){function c(n,i,a){a.resolved||d(r,f,n,e(t,i,n),a)}function f(e,t,r){s[e]=t,0===--o&&r.become(new C(s))}for(var l,n="function"==typeof t?c:f,a=new E,o=r.length>>>0,s=new Array(o),u=0;u<r.length&&!a.resolved;++u)l=r[u],void 0!==l||u in r?d(r,n,u,l,a):--o;return 0===o&&a.become(new C(s)),new i(_,a)}function d(e,t,r,n,i){if(U(n)){var a=w(n),o=a.state();0===o?a.fold(t,r,void 0,i):o>0?t(r,a.value,i):(i.become(a),m(e,r+1,a))}else t(r,n,i)}function m(e,t,r){for(var n=t;n<e.length;++n)v(b(e[n]),r)}function v(e,t){if(e!==t){var r=e.state();0===r?e.visit(e,void 0,e._unreport):0>r&&e._unreport()}}function g(e){return"object"!=typeof e||null===e?s(new TypeError("non-iterable passed to race()")):0===e.length?u():1===e.length?o(e[0]):y(e)}function y(e){var r,n,a,t=new E;for(r=0;r<e.length;++r)if(n=e[r],void 0!==n||r in e){if(a=b(n),0!==a.state()){t.become(a),m(e,r+1,a);break}a.visit(t,t.resolve,t.reject)}return new i(_,t)}function b(e){return H(e)?e._handler.join():U(e)?x(e):new C(e)}function w(e){return H(e)?e._handler.join():x(e)}function x(e){try{var t=e.then;return"function"==typeof t?new j(t,e):new C(e)}catch(r){return new T(r)}}function _(){}function S(){}function E(e,t){i.createContext(this,t),this.consumers=void 0,this.receiver=e,this.handler=void 0,this.resolved=!1}function A(e){this.handler=e}function j(e,r){E.call(this),t.enqueue(new N(e,r,this))}function C(e){i.createContext(this),this.value=e}function T(e){i.createContext(this),this.id=++q,this.value=e,this.handled=!1,this.reported=!1,this._report()}function O(e,t){this.rejection=e,this.context=t}function R(e){this.rejection=e}function M(){return new T(new TypeError("Promise cycle"))}function F(e,t){this.continuation=e,this.handler=t}function D(e,t){this.handler=t,this.value=e}function N(e,t,r){this._then=e,this.thenable=t,this.resolver=r}function L(e,t,r,n,i){try{e.call(t,r,n,i)}catch(a){n(a)}}function B(e,t,r,n){this.f=e,this.z=t,this.c=r,this.to=n,this.resolver=k,this.receiver=this}function H(e){return e instanceof i}function U(e){return("object"==typeof e||"function"==typeof e)&&null!==e}function z(e,t,r,n){return"function"!=typeof e?n.become(t):(i.enterContext(t),W(e,t.value,r,n),void i.exitContext())}function V(e,t,r,n,a){return"function"!=typeof e?a.become(r):(i.enterContext(r),K(e,t,r.value,n,a),void i.exitContext())}function G(e,t,r,n,a){return"function"!=typeof e?a.notify(t):(i.enterContext(r),X(e,t,n,a),void i.exitContext())}function $(e,t,r){try{return e(t,r)}catch(n){return s(n)}}function W(e,t,r,n){try{n.become(b(e.call(r,t)))}catch(i){n.become(new T(i))}}function K(e,t,r,n,i){try{e.call(n,t,r,i)}catch(a){i.become(new T(a))}}function X(e,t,r,n){try{n.notify(e.call(r,t))}catch(i){n.notify(i)}}function J(e,t){t.prototype=n(e.prototype),t.prototype.constructor=t}function Y(e,t){return t}function Q(){}function Z(){if("function"==typeof CustomEvent)try{var e=new CustomEvent("unhandledRejection");return e instanceof CustomEvent}catch(t){}return!1}function ee(){if("undefined"!=typeof document&&"function"==typeof document.createEvent)try{var e=document.createEvent("CustomEvent");return e.initCustomEvent("eventType",!1,!0,{}),!0}catch(t){}return!1}function te(){return"undefined"!=typeof process&&null!==process&&"function"==typeof process.emit?function(e,t){return"unhandledRejection"===e?process.emit(e,t.value,t):process.emit(e,t)}:"undefined"!=typeof self&&Z()?function(e,t){return function(r,n){var i=new t(r,{detail:{reason:n.value,key:n},bubbles:!1,cancelable:!0});return!e.dispatchEvent(i)}}(self,CustomEvent):"undefined"!=typeof self&&ee()?function(e,t){return function(r,n){var i=t.createEvent("CustomEvent");return i.initCustomEvent(r,!1,!0,{reason:n.value,key:n}),!e.dispatchEvent(i)}}(self,document):Q}var t=e.scheduler,r=te(),n=Object.create||function(e){function t(){}return t.prototype=e,new t};i.resolve=o,i.reject=s,i.never=u,i._defer=l,i._handler=b,i.prototype.then=function(e,t,r){var n=this._handler,i=n.join().state();if("function"!=typeof e&&i>0||"function"!=typeof t&&0>i)return new this.constructor(_,n);var a=this._beget(),o=a._handler;return n.chain(o,n.receiver,e,t,r),a},i.prototype["catch"]=function(e){return this.then(void 0,e)},i.prototype._beget=function(){return c(this._handler,this.constructor)},i.all=f,i.race=g,i._traverse=p,i._visitRemaining=m,_.prototype.when=_.prototype.become=_.prototype.notify=_.prototype.fail=_.prototype._unreport=_.prototype._report=Q,_.prototype._state=0,_.prototype.state=function(){return this._state},_.prototype.join=function(){for(var e=this;void 0!==e.handler;)e=e.handler;return e},_.prototype.chain=function(e,t,r,n,i){this.when({resolver:e,receiver:t,fulfilled:r,rejected:n,progress:i})},_.prototype.visit=function(e,t,r,n){this.chain(k,e,t,r,n)},_.prototype.fold=function(e,t,r,n){this.when(new B(e,t,r,n))},J(_,S),S.prototype.become=function(e){e.fail()};var k=new S;J(_,E),E.prototype._state=0,E.prototype.resolve=function(e){this.become(b(e))},E.prototype.reject=function(e){this.resolved||this.become(new T(e))},E.prototype.join=function(){if(!this.resolved)return this;for(var e=this;void 0!==e.handler;)if(e=e.handler,e===this)return this.handler=M();return e},E.prototype.run=function(){var e=this.consumers,t=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var r=0;r<e.length;++r)t.when(e[r])},E.prototype.become=function(e){this.resolved||(this.resolved=!0,this.handler=e,void 0!==this.consumers&&t.enqueue(this),void 0!==this.context&&e._report(this.context))},E.prototype.when=function(e){this.resolved?t.enqueue(new F(e,this.handler)):void 0===this.consumers?this.consumers=[e]:this.consumers.push(e)},E.prototype.notify=function(e){this.resolved||t.enqueue(new D(e,this))},E.prototype.fail=function(e){var t="undefined"==typeof e?this.context:e;this.resolved&&this.handler.join().fail(t)},E.prototype._report=function(e){this.resolved&&this.handler.join()._report(e)},E.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},J(_,A),A.prototype.when=function(e){t.enqueue(new F(e,this))},A.prototype._report=function(e){this.join()._report(e)},A.prototype._unreport=function(){this.join()._unreport()},J(E,j),J(_,C),C.prototype._state=1,C.prototype.fold=function(e,t,r,n){V(e,t,this,r,n)},C.prototype.when=function(e){z(e.fulfilled,this,e.receiver,e.resolver)};var q=0;J(_,T),T.prototype._state=-1,T.prototype.fold=function(e,t,r,n){n.become(this)},T.prototype.when=function(e){"function"==typeof e.rejected&&this._unreport(),z(e.rejected,this,e.receiver,e.resolver)},T.prototype._report=function(e){t.afterQueue(new O(this,e))},T.prototype._unreport=function(){this.handled||(this.handled=!0,t.afterQueue(new R(this)))},T.prototype.fail=function(e){this.reported=!0,r("unhandledRejection",this),i.onFatalRejection(this,void 0===e?this.context:e)},O.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,r("unhandledRejection",this.rejection)||i.onPotentiallyUnhandledRejection(this.rejection,this.context))},R.prototype.run=function(){this.rejection.reported&&(r("rejectionHandled",this.rejection)||i.onPotentiallyUnhandledRejectionHandled(this.rejection))},i.createContext=i.enterContext=i.exitContext=i.onPotentiallyUnhandledRejection=i.onPotentiallyUnhandledRejectionHandled=i.onFatalRejection=Q;var P=new _,I=new i(_,P);return F.prototype.run=function(){this.handler.join().when(this.continuation)},D.prototype.run=function(){var e=this.handler.consumers;if(void 0!==e)for(var t,r=0;r<e.length;++r)t=e[r],G(t.progress,this.value,this.handler,t.receiver,t.resolver)},N.prototype.run=function(){function t(t){e.resolve(t)}function r(t){e.reject(t)}function n(t){e.notify(t)}var e=this.resolver;L(this._then,this.thenable,t,r,n)},B.prototype.fulfilled=function(e){this.f.call(this.c,this.z,e,this.to)},B.prototype.rejected=function(e){this.to.reject(e)},B.prototype.progress=function(e){this.to.notify(e)},i}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e()})},{}],25:[function(t,r,n){!function(e){"use strict";e(function(){function e(){return{state:"pending"}}function t(e){return{state:"rejected",reason:e}}function r(e){return{state:"fulfilled",value:e}}function n(n){var i=n.state();return 0===i?e():i>0?r(n.value):t(n.value)}return{pending:e,fulfilled:r,rejected:t,inspect:n}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e()})},{}],26:[function(t,r,n){!function(e){e(function(e){function o(e,t){return a(e,this,t||[])}function s(e,t,r,n){var i=f(n);try{switch(r.length){case 2:e.call(t,r[0],r[1],i);break;case 1:e.call(t,r[0],i);break;case 0:e.call(t,i);break;default:r.push(i),e.apply(t,r)}}catch(a){n.reject(a)}}function u(e){return a(e,this,i.call(arguments,1))}function l(e){var t=arguments.length>1?i.call(arguments,1):[];return function(){var o,r=t.length,n=arguments.length,i=new Array(n+r);for(o=0;r>o;++o)i[o]=t[o];for(o=0;n>o;++o)i[o+r]=arguments[o];return a(e,this,i)}}function c(e,t,n){return r(l,t,n,e)}function f(e){return function(t,r){t?e.reject(t):arguments.length>2?e.resolve(i.call(arguments,1)):e.resolve(r)}}function p(e,r){function i(e){a(null,e)}function a(e,t){n(function(){r(e,t)},0)}return e=t(e),r&&e.then(i,a),e}function h(e){return function(t){return p(t,e)}}var t=e("./when"),r=e("./lib/liftAll"),n=e("./lib/env").setTimer,i=Array.prototype.slice,a=e("./lib/apply")(t.Promise,s);return{lift:l,liftAll:c,apply:o,call:u,createCallback:f,bindCallback:p,liftCallback:h}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e(t)})},{"./lib/apply":11,"./lib/env":21,"./lib/liftAll":23,"./when":32}],27:[function(t,r,n){!function(e){e(function(e){var t=e("./when"),r=t.Promise.all,n=Array.prototype.slice;return function(e){return r(n.call(arguments,1)).then(function(r){return t.map(e,function(e){return e.apply(void 0,r)})})}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e(t)})},{"./when":32}],28:[function(t,r,n){!function(e){e(function(e){var t=e("./when"),r=t.Promise.all,n=Array.prototype.slice;return function(e){var i=function(e,t){return i=function(e,t){return t(e)},t.apply(null,e)};return r(n.call(arguments,1)).then(function(r){return t.reduce(e,function(e,t){return i(e,t)},r)})}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e(t)})},{"./when":32}],29:[function(t,r,n){!function(e){"use strict";e(function(e){var t=e("./when"),r=t["try"],n=e("./cancelable");return function(e,i,a,o){function c(e){s.resolve(e)}function f(e){r(i).then(p,l),void 0!==e&&s.notify(e)}function p(){u||t(e(),function(e){t(a(e),function(t){return t?c(e):f(e)},function(){f(e)})},l)}var s,u,l;return u=!1,s=n(t.defer(),function(){u=!0}),l=s.reject,a=a||function(){return!1},"function"!=typeof i&&(i=function(e){return function(){return t().delay(e)}}(i)),o?f():p(),s.promise=Object.create(s.promise),s.promise.cancel=s.cancel,s.promise}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e(t)})},{"./cancelable":3,"./when":32}],30:[function(t,r,n){!function(e){e(function(e){var t=e("./when"),r=t.Promise.all,n=Array.prototype.slice;return function(e){function a(e){return i.push(e),i}var i=[];return r(n.call(arguments,1)).then(function(r){return t.reduce(e,function(e,n){return t(n.apply(void 0,r),a)},i)})}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e(t)})},{"./when":32}],31:[function(t,r,n){!function(e){e(function(e){var t=e("./when");return function(e,r){return t(r).timeout(e)}})}("function"==typeof e&&e.amd?e:function(e){r.exports=e(t)})},{"./when":32}],32:[function(t,r,n){!function(e){"use strict";e(function(e){function h(e,t,r,n){var i=f.resolve(e);return arguments.length<2?i:i.then(t,r,n)}function d(e){return new f(e)}function m(e){return function(){for(var t=0,r=arguments.length,n=new Array(r);r>t;++t)n[t]=arguments[t];return p(e,this,n)}}function v(e){for(var t=0,r=arguments.length-1,n=new Array(r);r>t;++t)n[t]=arguments[t+1];return p(e,this,n)}function g(){return new y}function y(){function t(t){e._handler.resolve(t)}function r(t){e._handler.reject(t)}function n(t){e._handler.notify(t)}var e=f._defer();this.promise=e,this.resolve=t,this.reject=r,this.notify=n,this.resolver={resolve:t,reject:r,notify:n}}function b(e){return e&&"function"==typeof e.then}function w(){return f.all(arguments)}function x(e){return h(e,f.all)}function _(e){return h(e,f.settle)}function S(e,t){return h(e,function(e){return f.map(e,t)})}function k(e,t){return h(e,function(e){return f.filter(e,t)})}var t=e("./lib/decorators/timed"),r=e("./lib/decorators/array"),n=e("./lib/decorators/flow"),i=e("./lib/decorators/fold"),a=e("./lib/decorators/inspect"),o=e("./lib/decorators/iterate"),s=e("./lib/decorators/progress"),u=e("./lib/decorators/with"),l=e("./lib/decorators/unhandledRejection"),c=e("./lib/TimeoutError"),f=[r,n,i,o,s,a,u,t,l].reduce(function(e,t){return t(e)},e("./lib/Promise")),p=e("./lib/apply")(f);return h.promise=d,h.resolve=f.resolve,h.reject=f.reject,h.lift=m,h["try"]=v,h.attempt=v,h.iterate=f.iterate,h.unfold=f.unfold,h.join=w,h.all=x,h.settle=_,h.any=m(f.any),h.some=m(f.some),h.race=m(f.race),h.map=S,h.filter=k,h.reduce=m(f.reduce),h.reduceRight=m(f.reduceRight),h.isPromiseLike=b,h.Promise=f,h.defer=g,h.TimeoutError=c,h})}("function"==typeof e&&e.amd?e:function(e){r.exports=e(t)})},{"./lib/Promise":8,"./lib/TimeoutError":10,"./lib/apply":11,"./lib/decorators/array":12,"./lib/decorators/flow":13,"./lib/decorators/fold":14,"./lib/decorators/inspect":15,"./lib/decorators/iterate":16,"./lib/decorators/progress":17,"./lib/decorators/timed":18,"./lib/decorators/unhandledRejection":19,"./lib/decorators/with":20}]},{},[1])(1)});