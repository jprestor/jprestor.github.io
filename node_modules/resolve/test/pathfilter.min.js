var path=require("path"),test=require("tape"),resolve=require("../");test("#62: deep module references and the pathFilter",function(e){e.plan(9);var t=path.join(__dirname,"/pathfilter/deep_ref"),r=function(r,n,i){return e.equal(r.version,"1.2.3"),e.equal(n,path.join(t,"node_modules/deep/ref")),e.equal(i,"ref"),"alt"};resolve("deep/ref",{basedir:t},function(r,n,i){r&&e.fail(r),e.equal(i.version,"1.2.3"),e.equal(n,path.join(t,"node_modules/deep/ref.js"))}),resolve("deep/deeper/ref",{basedir:t},function(r,n,i){r&&e.fail(r),e.notEqual(i,void 0),e.equal(i.version,"1.2.3"),e.equal(n,path.join(t,"node_modules/deep/deeper/ref.js"))}),resolve("deep/ref",{basedir:t,pathFilter:r},function(r,n,i){r&&e.fail(r),e.equal(n,path.join(t,"node_modules/deep/alt.js"))})});