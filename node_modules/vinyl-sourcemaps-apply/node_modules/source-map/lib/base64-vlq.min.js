function toVLQSigned(e){return 0>e?(-e<<1)+1:(e<<1)+0}function fromVLQSigned(e){var t=1===(1&e),r=e>>1;return t?-r:r}var base64=require("./base64"),VLQ_BASE_SHIFT=5,VLQ_BASE=1<<VLQ_BASE_SHIFT,VLQ_BASE_MASK=VLQ_BASE-1,VLQ_CONTINUATION_BIT=VLQ_BASE;exports.encode=function(e){var r,t="",n=toVLQSigned(e);do r=n&VLQ_BASE_MASK,n>>>=VLQ_BASE_SHIFT,n>0&&(r|=VLQ_CONTINUATION_BIT),t+=base64.encode(r);while(n>0);return t},exports.decode=function(e,t,r){var o,s,n=e.length,i=0,a=0;do{if(t>=n)throw new Error("Expected more digits in base 64 VLQ value.");if(s=base64.decode(e.charCodeAt(t++)),-1===s)throw new Error("Invalid base64 digit: "+e.charAt(t-1));o=!!(s&VLQ_CONTINUATION_BIT),s&=VLQ_BASE_MASK,i+=s<<a,a+=VLQ_BASE_SHIFT}while(o);r.value=fromVLQSigned(i),r.rest=t};