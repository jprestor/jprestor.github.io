"use strict";function valuePromise(e){var t=new Promise(Promise._noop);return t._state=1,t._value=e,t}var Promise=require("./core.js");module.exports=Promise;var TRUE=valuePromise(!0),FALSE=valuePromise(!1),NULL=valuePromise(null),UNDEFINED=valuePromise(void 0),ZERO=valuePromise(0),EMPTYSTRING=valuePromise("");Promise.resolve=function(e){if(e instanceof Promise)return e;if(null===e)return NULL;if(void 0===e)return UNDEFINED;if(e===!0)return TRUE;if(e===!1)return FALSE;if(0===e)return ZERO;if(""===e)return EMPTYSTRING;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new Promise(t.bind(e))}catch(r){return new Promise(function(e,t){t(r)})}return valuePromise(e)},Promise.all=function(e){var t=Array.prototype.slice.call(e);return new Promise(function(e,r){function i(a,o){if(o&&("object"==typeof o||"function"==typeof o)){if(o instanceof Promise&&o.then===Promise.prototype.then){for(;3===o._state;)o=o._value;return 1===o._state?i(a,o._value):(2===o._state&&r(o._value),void o.then(function(e){i(a,e)},r))}var s=o.then;if("function"==typeof s){var u=new Promise(s.bind(o));return void u.then(function(e){i(a,e)},r)}}t[a]=o,0===--n&&e(t)}if(0===t.length)return e([]);for(var n=t.length,a=0;a<t.length;a++)i(a,t[a])})},Promise.reject=function(e){return new Promise(function(t,r){r(e)})},Promise.race=function(e){return new Promise(function(t,r){e.forEach(function(e){Promise.resolve(e).then(t,r)})})},Promise.prototype["catch"]=function(e){return this.then(null,e)};