"use strict";function getIdFor(e){if(e in names)return names[e];var t;do t="_"+Math.floor(100*Math.random());while(-1!==ids.indexOf(t));return ids.push(t),names[e]=t,t}function fixup(e){function n(t,r){for(var n=t.start;n<t.end;n++)e[n]="";e[t.start]=r}var t=acorn.parse(e);return e=e.split(""),walk.simple(t,{MemberExpression:function(e){e.computed||"Identifier"===e.property.type&&"_"===e.property.name[0]&&n(e.property,getIdFor(e.property.name))}}),e.join("")}var fs=require("fs"),rimraf=require("rimraf"),acorn=require("acorn"),walk=require("acorn/dist/walk"),ids=[],names={};rimraf.sync(__dirname+"/lib/"),fs.mkdirSync(__dirname+"/lib/"),fs.readdirSync(__dirname+"/src").forEach(function(e){var t=fs.readFileSync(__dirname+"/src/"+e,"utf8"),r=fixup(t);fs.writeFileSync(__dirname+"/lib/"+e,r)}),rimraf.sync(__dirname+"/domains/"),fs.mkdirSync(__dirname+"/domains/"),fs.readdirSync(__dirname+"/src").forEach(function(e){var t=fs.readFileSync(__dirname+"/src/"+e,"utf8"),r=fixup(t);r=r.replace(/require\(\'asap\/raw\'\)/g,"require('asap')"),fs.writeFileSync(__dirname+"/domains/"+e,r)}),rimraf.sync(__dirname+"/setimmediate/"),fs.mkdirSync(__dirname+"/setimmediate/"),fs.readdirSync(__dirname+"/src").forEach(function(e){var t=fs.readFileSync(__dirname+"/src/"+e,"utf8"),r=fixup(t);r=r.replace(/var asap \= require\(\'([a-z\/]+)\'\);/g,""),r=r.replace(/asap/g,"setImmediate"),fs.writeFileSync(__dirname+"/setimmediate/"+e,r)});