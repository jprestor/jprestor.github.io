"use strict";function dest(e,t){function i(t,i,a){var o;"string"==typeof e&&(o=path.resolve(n,e)),"function"==typeof e&&(o=path.resolve(n,e(t)));var s=path.resolve(o,t.relative),u=path.dirname(s);t.stat=t.stat?t.stat:new fs.Stats,t.stat.mode=r.mode||t.stat.mode,t.cwd=n,t.base=o,t.path=s,mkdirp(u,function(e){return e?a(e):void writeContents(s,t,a)})}if(t=t||{},"string"!=typeof e&&"function"!=typeof e)throw new Error("Invalid output folder");var r=defaults(t,{cwd:process.cwd()});"string"==typeof r.mode&&(r.mode=parseInt(r.mode,8));var n=path.resolve(r.cwd),a=through2.obj(i);return a.resume(),a}var defaults=require("defaults"),path=require("path"),through2=require("through2"),mkdirp=require("mkdirp"),fs=require("graceful-fs"),writeContents=require("./writeContents");module.exports=dest;